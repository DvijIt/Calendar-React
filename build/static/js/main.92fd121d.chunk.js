(this["webpackJsonpreact-calendar"]=this["webpackJsonpreact-calendar"]||[]).push([[0],{27:function(e,t,a){e.exports=a(84)},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),o=a.n(r),l=(a(32),a(33),a(34),a(35),a(36),a(37),a(3)),i=a(4),s=a(6),u=a(5),d=a(10),m=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleNextWeek,a=e.handlePrevWeek,n=e.handleCurrentWeek;return c.a.createElement("div",{className:"header__navigation"},c.a.createElement("button",{className:"white black-text btn btn-current-week",onClick:n},"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"),c.a.createElement("button",{className:"white black-text btn-flat",onClick:a},c.a.createElement(d.Icon,{small:!0},"chevron_left")),c.a.createElement("button",{className:"white black-text btn-flat",onClick:t},c.a.createElement(d.Icon,{small:!0},"chevron_right")))}}]),a}(n.PureComponent),p=function(e){var t=e.getCurrentMonth;return c.a.createElement("div",{className:"header__month-info"},c.a.createElement("span",null,t))},h=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"days-name-list"},["\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411","\u0412\u0421"].map((function(e,t){return c.a.createElement("span",{className:"day-name",key:t},e)})))}}]),a}(c.a.PureComponent),v=a(8),f=a.n(v),E=function(e){var t=e.day,a=Array(7).fill("0").map((function(){var e,a=f()().startOf("isoWeek").add(t,"day");return e=f()().format("DD.MM.YY")===a.format("DD.MM.YY")?"day-number active":"day-number",t++,c.a.createElement("span",{key:t,className:e},a.format("DD"))}));return c.a.createElement("div",{className:"days-numbers-list"},a)},b=function(e){var t=e.day;return c.a.createElement("div",{className:"header__week"},c.a.createElement("div",{className:"timezone"},(new Date).toString().split(" ")[5].slice(0,6)),c.a.createElement("div",{className:"weekdata"},c.a.createElement(h,null),c.a.createElement(E,{day:t})))},y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"header__create-event"},c.a.createElement("button",{className:"waves-effect waves-teal z-depth-2 white black-text create-btn",onClick:this.props.openPopup,"data-option":"buttonCreateEvent"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))}}]),a}(n.PureComponent),k=function(e){var t=e.day,a=e.handleNextWeek,n=e.handlePrevWeek,r=e.handleCurrentWeek,o=e.currentMonth,l=e.openPopup;return c.a.createElement("header",{className:"calendar__header header"},c.a.createElement("div",{className:"header__top-info"},c.a.createElement(y,{openPopup:l}),c.a.createElement(m,{handleNextWeek:a,handlePrevWeek:n,handleCurrentWeek:r}),c.a.createElement(p,{getCurrentMonth:o})),c.a.createElement(b,{day:t}))},D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=Array(23).fill("0");return c.a.createElement("aside",{className:"calendar__timescale"},e.map((function(e,t){var a=t+1;return c.a.createElement("div",{key:a,className:"hour"},a<10?"0".concat(a,":00"):"".concat(a,":00"))})))}}]),a}(n.PureComponent),g=60*+f()().format("HH")+ +f()().format("mm"),N=function(){return c.a.createElement("div",{className:"redline",style:{marginTop:"".concat(g,"px")}})},O=a(12),C="https://5ec377e28ebdcc0016a5a8e4.mockapi.io/api/v1/events",j=function(){return fetch(C).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))},w=function(e){var t=e.id,a=e.checkDelete;return c.a.createElement("div",{id:"modal2",className:"popup popup-delete z-depth-1"},c.a.createElement("div",{className:"popup-content",onClick:function(){var e;(e=t,fetch("".concat(C,"/").concat(e),{method:"DELETE"})).then((function(){a()}))}},c.a.createElement(d.Icon,{small:!0},"delete"),c.a.createElement("span",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={show:!1},e.showDeletePopup=function(){Object(O.a)(e)&&e.setState({show:!0})},e.closeDeletePopup=function(){Object(O.a)(e)&&e.setState({show:!1})},e.handleGetEventData=function(t){e.props.getEventData(t,e.props)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.title,n=e.timeStart,r=e.timeEnd,o=e.description,l=e.color,i=e.checkDelete,s={top:"".concat(n.slice(3),"px"),backgroundColor:l||"#6495ed"};return c.a.createElement("div",{className:"event","data-option":"event","data-id":t,style:s,onPointerEnter:this.showDeletePopup,onPointerLeave:this.closeDeletePopup,onClick:this.handleGetEventData},c.a.createElement("h4",{className:"event-title"},a),c.a.createElement("div",{className:"event-time"},"".concat(n," - ").concat(r)),c.a.createElement("div",{className:"event-description"},o),this.state.show&&c.a.createElement(w,{id:t,checkDelete:i}))}}]),a}(c.a.Component),S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.date,a=e.events,n=e.checkDelete,r=e.openPopup,o=e.getEventData;return Array(24).fill("0").map((function(e,l){var i=l<10?"0".concat(l,":00"):"".concat(l,":00"),s=a.find((function(e){return e.date===t&&e.timeStart===i}));return c.a.createElement("div",{key:l,className:"sell","data-time":i,"data-option":"sell",onClick:r},"undefined"!==typeof s&&c.a.createElement(P,Object.assign({},s,{checkDelete:n,openPopup:r,getEventData:o})))}))}}]),a}(c.a.Component),_=function(e){var t=e.day,a=e.events,n=e.checkDelete,r=e.openPopup,o=e.getEventData,l=t;return Array(7).fill("0").map((function(){var e=f()().startOf("isoWeek").add(l,"day");return l++,e.format("DD MM YYYY")})).map((function(e){return c.a.createElement("div",{key:e,className:"column__day","data-date":e},c.a.createElement(S,{date:e,events:a,checkDelete:n,openPopup:r,getEventData:o}),e===f()().format("DD-MM-YYYY")&&c.a.createElement(N,null))}))},M=function(e){var t=e.day,a=e.openPopup,n=e.checkDelete,r=e.events,o=e.getEventData;return c.a.createElement("main",{className:"main calendar__grid"},c.a.createElement(D,null),c.a.createElement("div",{className:"calendar__columns"},c.a.createElement(_,{day:t,events:r,checkDelete:n,openPopup:a,getEventData:o})))},Y=a(16),W=a(15),x=a(26),A=a.n(x),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=document.querySelector(".datepicker");A.a.Datepicker.init(e,n.dateOption)},n.handleChange=function(){var e=document.querySelector(".datepicker").M_Datepicker.el.value;n.props.getDate(e)},n.dateOption={autoClose:!0,onClose:n.handleChange,format:"dd mm yyyy",i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",months:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0440\u0432\u0430\u0440\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],monthsShort:["\u042f\u043d\u0432","\u0424\u0435\u0440\u0432","\u041c\u0430\u0442\u0440","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043b\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f\u0431","\u0414\u0435\u043a"],nextMonth:"\u203a",previousMonth:"\u2039",weekdays:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"],weekdaysAbbrev:["\u0412","\u041f","\u041f","\u0421","\u0427","\u041f","\u0421"],weekdaysShort:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"]}},n.date=c.a.createRef(),n}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("input",{type:"text",className:"datepicker",value:this.props.date,onChange:this.handleChange})}}]),a}(n.Component),H=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,c=t.value;n.setState(Object(W.a)({},a,c))},n.componentDidMount=function(){console.log(typeof n.state.id)},n.changeDate=function(e){console.log("qwe"),n.setState(Object(Y.a)(Object(Y.a)({},n.state),{},{date:e}))},n.handleSubmit=function(e){e.preventDefault(),void 0===n.state.id?n.createNewEvent():n.editEventData()},n.createNewEvent=function(){var e;(e=n.state,fetch(C,{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("Failed to create event")}))).then(n.props.closePopup)},n.editEventData=function(){var e,t;(e=n.state.id,t=n.state,fetch("".concat(C,"/").concat(e),{method:"PUT",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Failed to edit data event")}))).then(n.props.closePopup)},n.state=Object(Y.a)({},n.props),n}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{id:"modal1",className:"popup z-depth-4"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("form",{className:"popup-form",onSubmit:this.handleSubmit},c.a.createElement("input",{className:"popup__title",type:"text",name:"title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:this.state.title,onChange:this.handleChange}),c.a.createElement("div",{className:"popup__data"},c.a.createElement(d.Icon,{small:!0},"access_time"),c.a.createElement("div",{className:"input-field"},c.a.createElement(I,{getDate:this.changeDate,date:this.state.date})),c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{className:"dataStart",type:"text",name:"timeStart",value:this.state.timeStart,onChange:this.handleChange})),c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{className:"dataEnd",type:"text",name:"timeEnd",value:this.state.timeEnd,onChange:this.handleChange}))),c.a.createElement("div",{className:"subject"},c.a.createElement(d.Icon,{small:!0},"subject"),c.a.createElement("input",{className:"popup-form__description",type:"text",name:"description",placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:this.state.description,onChange:this.handleChange})),c.a.createElement("input",{type:"color",className:"popup-form__color",name:"color",value:this.state.color,onChange:this.handleChange}),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"color"},"\u0426\u0432\u0435\u0442")),c.a.createElement("button",{className:"btn waves-effect waves-light blue",type:"submit",name:"submit",onClick:this.handleSubmit},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.a.createElement("button",{className:"close btn-flat",onClick:this.props.closePopup},c.a.createElement(d.Icon,{small:!0},"close")))))}}]),a}(n.Component),z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={day:0,show:!1,dataEvent:{title:"",timeStart:"",timeEnd:"",date:"",description:"",color:"#6495ed"},checkDelete:!1,events:[]},e.handlePrevWeek=function(){e.setState({day:e.state.day-7})},e.handleNextWeek=function(){e.setState({day:e.state.day+7})},e.handleCurrentWeek=function(){e.setState({day:0})},e.currentMonth=function(){var t=f()().startOf("isoWeek").add(e.state.day,"day"),a=f()().startOf("isoWeek").add(e.state.day+6,"day"),n=t.format("MMM"),c=t.format("YYYY"),r=a.format("MMM"),o=a.format("YYYY"),l="".concat(n," ").concat(c," - ").concat(r," ").concat(o);return n===r&&c===o?l="".concat(n," ").concat(o):c===o&&(l="".concat(n," - ").concat(r," ").concat(c)),l},e.showPopup=function(t){t.preventDefault(),"buttonCreateEvent"===t.target.dataset.option&&e.setState({show:!0,dataEvent:{title:"",timeStart:f()(new Date).format("HH:00"),timeEnd:f()(new Date).add(1,"hour").format("HH:00"),date:f()(new Date).format("DD MM YYYY"),description:"",color:""}}),"sell"===t.target.dataset.option&&e.setState({show:!0,dataEvent:{title:"",timeStart:t.target.dataset.time,timeEnd:t.target.nextElementSibling.dataset.time,date:t.target.parentNode.dataset.date,description:"",color:""}})},e.getEventData=function(t,a){if(t.target.closest('[data-option="event"]')&&!t.target.closest(".popup-delete")){var n=a.id,c=a.title,r=a.timeStart,o=a.date,l=a.timeEnd,i=a.description,s=a.color;console.log(a),e.setState({show:!0,dataEvent:{id:n,title:c,timeStart:r,timeEnd:l,date:o,description:i,color:s}})}},e.closePopup=function(){e.setState({show:!1})},e.handleDelete=function(){e.setState({checkDelete:!0})},e.componentDidMount=function(){j().then((function(t){e.setState({events:t})}))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.show===t.show&&this.state.checkDelete===t.checkDelete||j().then((function(e){a.setState({events:e,checkDelete:!1})}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"calendar"},c.a.createElement(k,{day:this.state.day,handleNextWeek:this.handleNextWeek,handlePrevWeek:this.handlePrevWeek,handleCurrentWeek:this.handleCurrentWeek,currentMonth:this.currentMonth(),openPopup:this.showPopup}),c.a.createElement(M,{day:this.state.day,openPopup:this.showPopup,checkDelete:this.handleDelete,events:this.state.events,getEventData:this.getEventData}),this.state.show&&c.a.createElement(H,Object.assign({closePopup:this.closePopup},this.state.dataEvent)))}}]),a}(c.a.Component);var J=function(){return c.a.createElement(z,null)};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(J,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.92fd121d.chunk.js.map